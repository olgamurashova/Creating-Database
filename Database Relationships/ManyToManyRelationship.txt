To implement a many-to-many relationship in a relational database, we would create a third cross-reference table also known as a join table. It will have these two constraints:

foreign keys referencing the primary keys of the two member tables.
a composite primary key made up of the two foreign keys.
Let’s elaborate on this further with the recipe and ingredient many-to-many relationship. Let’s say a recipe table has the following columns:

id (primary key)
name
serving_size
preparation_time
cook_time
An ingredient table has the following columns:

id (primary key)
name
amount
A third cross-reference table, recipes_ingredients, will support the following columns:

recipe_id (foreign key referencing recipe table’s id)(primary key)
ingredient_id (foreign key referencing ingredient table’s id) (primary key)
Both recipe_id and ingredient_id also serve as a composite primary key for recipes_ingredients.

1. Creating cross-reference table:

CREATE TABLE books_authors (
  book_isbn varchar(50) REFERENCES book(isbn),
  author_email varchar(100) REFERENCES author(email),
  PRIMARY KEY (book_isbn, author_email)
);

2. Validating the existence of primary and foreign keys:

SELECT constraint_name, table_name, column_name
FROM information_schema.key_column_usage
WHERE table_name = 'books_authors';

_________________________________________

Another example

1. INSERT INTO books_authors VALUES (
  '123457890',
  'jkey@db.com'
);

INSERT INTO books_authors VALUES (
  '123457890',
  'cindex@db.com'
);

INSERT INTO books_authors VALUES (
  '987654321',
  'cindex@db.com'
);

2. Query to show the one-to-many relationship between book and author:

SELECT 
book.title AS book_title, 
author.name AS author_name,
book.description AS book_description
FROM 
book, author, books_authors
WHERE 
book.isbn = books_authors.book_isbn
AND 
author.email = books_authors.author_email;

3. Query to show the one-to-many relationship between author and book:

SELECT 
author.name AS author_name,
author.email AS author_email,
book.title AS book_title
FROM 
book
JOIN 
books_authors
ON 
book.isbn = books_authors.book_isbn
JOIN
author
ON
author.email = books_authors.author_email;
